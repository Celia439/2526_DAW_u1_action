name: Generar y Publicar Documentación

on:
  push:
    branches: [ "main" ]
  workflow_dispatch:

jobs:
  build-docs:
    runs-on: ubuntu-latest

    steps:
      # 1. Checkout del repositorio
      - name: Checkout repo
        uses: actions/checkout@v3

      # 2. Instalar JDK
      - name: Instalar JDK
        uses: actions/setup-java@v3
        with:
          distribution: "temurin"
          java-version: "17"

      # 3. Instalar Python
      - name: Instalar Python
        uses: actions/setup-python@v4
        with:
          python-version: "3.10"

      # 4. Instalar Node.js
      - name: Instalar Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "18"

      # 5. Instalar dependencias de documentación
      # Cambia estos comandos según tu generador (Sphinx, Docusaurus, JSDoc, etc.)
      - name: Instalar dependencias de docs
        run: |
          pip install sphinx
          npm install
          # ./gradlew build (si lo necesitas)
      
      # 6. Generar la documentación HTML
      # Ajusta el comando a tu sistema de documentación
      - name: Generar docs HTML
        run: |
          sphinx-build docs docs/_build/html
          # Ejemplos alternativos:
          # npm run build
          # javadoc -d docs html...

      # 7. Publicar en GitHub Pages
      - name: Publicar a GitHub Pages
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: docs/_build/html
